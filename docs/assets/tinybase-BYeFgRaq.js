import{R as vr}from"./react-GE_zDVAW.js";const Bt=s=>typeof s,kr="tinybase",Ss="",Nr=Bt(Ss),hr=Bt(Bt),Mr="Listener",p="Result",_r="get",zr="set",Hr="add",Ur="del",Is="Has",Wr="has",rs="Ids",ss="Table",Pt=ss+"s",zo=ss+rs,as="Row",ke=as+"Count",Ms=as+rs,Ne="Sorted"+as+rs,ds="Cell",ms=ds+rs,ps="Value",St=ps+"s",Ho=ps+rs,fn="Transaction",Uo="Partial",Wo="Finish",he="Status",Tn="Metric",jr="Index",Me="Slice",Br="Relationship",jo="Remote"+as+"Id",Bo="Local",Jo="Linked",Jr="Query",_e="Checkpoint",Qr=globalThis,$s=s=>s==null,ws=(s,t,e)=>$s(s)?e==null?void 0:e():t(s),Qo=s=>Bt(s)==Nr,Rn=s=>Bt(s)==hr,Gr=s=>Array.isArray(s),Jt=s=>s.length,Vt=()=>{},Yr=(s,t)=>is(new Array(s).fill(0),(e,o)=>t(o)),Go=(s,t)=>s.every(t),Ie=(s,t)=>Jt(s)===Jt(t)&&Go(s,(e,o)=>t[o]===e),is=(s,t)=>s.map(t),qr=s=>Jt(s)==0,Kr=(s,t)=>s.filter(t),yo=(s,t,e)=>s.with(t,e),{PureComponent:pu,Fragment:sC,createContext:Or,createElement:Ls,useCallback:hs,useContext:ze,useEffect:gt,useLayoutEffect:Xr,useMemo:yn,useRef:Zr,useState:At,useSyncExternalStore:xr}=vr,Es=(s,...t)=>$s(s)?{}:s(...t),Yo=(s,t)=>[s,s==null?void 0:s.getStore(),s==null?void 0:s.getLocalTableId(t),s==null?void 0:s.getRemoteTableId(t)],Ir=(s,t)=>[s,s==null?void 0:s.getStore(),s==null?void 0:s.getTableId(t)],He=Object,$o=s=>He.getPrototypeOf(s),mr=He.entries,wo=s=>!$s(s)&&ws($o(s),t=>t==He.prototype||$s($o(t)),()=>!0),qo=He.keys,Ko=(s,t)=>ws(s,e=>e[t]),Oo=(s,t)=>t in s,pr=(s,t)=>(delete s[t],s),sa=s=>Jt(qo(s)),Xo=(s,t)=>{const e=mr(s);return Jt(e)===sa(t)&&Go(e,([o,c])=>wo(c)?wo(t[o])?Xo(t[o],c):!1:t[o]===c)},ta=(s,t,e)=>(Oo(s,t)||(s[t]=e()),s[t]),Qt=ta(Qr,kr+"_uirc",()=>Or([])),Ws=(s,t)=>{const e=ze(Qt);return $s(s)?e[t*2]:Qo(s)?Ko(e[t*2+1]??{},s):s},st=(s,t)=>{const e=Ws(s,t);return $s(s)||Qo(s)?e:s},tt=(s,t,e)=>{const{16:o,17:c}=ze(Qt);gt(()=>(o==null||o(e,s,t),()=>c==null?void 0:c(e,s)),[o,s,t,e,c])},et=s=>qo(ze(Qt)[s*2+1]??{}),ea=()=>et(0),na=s=>Ws(s,0),V=s=>st(s,0),oa=(s,t)=>tt(s,t,0),ca=()=>et(1),ra=s=>Ws(s,1),Ue=s=>st(s,1),aa=(s,t)=>tt(s,t,1),ia=()=>et(2),la=s=>Ws(s,2),Lt=s=>st(s,2),ua=(s,t)=>tt(s,t,2),Ca=()=>et(3),Sa=s=>Ws(s,3),_s=s=>st(s,3),La=(s,t)=>tt(s,t,3),fa=()=>et(4),Ta=s=>Ws(s,4),x=s=>st(s,4),Ra=(s,t)=>tt(s,t,4),ya=()=>et(5),$a=s=>Ws(s,5),Vs=s=>st(s,5),wa=(s,t)=>tt(s,t,5),da=()=>et(6),Ea=s=>Ws(s,6),$n=s=>st(s,6),Va=(s,t)=>tt(s,t,6),ga=()=>et(7),Aa=s=>Ws(s,7),wn=s=>st(s,7),ba=(s,t)=>tt(s,t,7),B=[],Eo=[{},[],[B,void 0,B],void 0,!1,0],Pa=[Xo,Ie,([s,t,e],[o,c,a])=>t===c&&Ie(s,o)&&Ie(e,a)],Da=(s,t)=>s===t,qt=(s,t,e=B)=>{const[,o]=At(),[c,a]=At();return gt(()=>{const u=s?t(s):void 0;return a(u),o([]),u==null?void 0:u.destroy},[s,...e]),c},Zo=(s,t,...e)=>{var c;const o=(c=s==null?void 0:s[Hr+t+Mr])==null?void 0:c.call(s,...e);return()=>s==null?void 0:s.delListener(o)},b=(s,t,e,o=B)=>{const c=Zr(Eo[e]),a=hs(()=>{var L;const T=((L=t==null?void 0:t[(e==4?Wr:_r)+s])==null?void 0:L.call(t,...o))??Eo[e];return(Pa[e]??Da)(T,c.current)?c.current:c.current=T},[t,e,s,...o]),u=hs(T=>Zo(t,(e==4?Is:Ss)+s,...o,T),[t,e,s,...o]);return xr(u,a,a)},P=(s,t,e,o=B,c=B,...a)=>Xr(()=>Zo(t,s,...c,e,...a),[t,s,...c,...o,...a]),nt=(s,t,e,o=B,c=Vt,a=B,...u)=>{const T=V(s);return hs(L=>ws(T,S=>ws(e(L,S),y=>c(S[zr+t](...xo(u,S,L),y),y))),[T,t,...o,...a,...Io(u)])},xo=(s,t,e)=>is(s,o=>Rn(o)?o(e,t):o),Io=s=>Kr(s,t=>!Rn(t)),Dt=(s,t,e=Vt,o=B,...c)=>{const a=V(s);return hs(u=>e(a==null?void 0:a[Ur+t](...xo(c,a,u))),[a,t,...o,...Io(c)])},mo=(s,t,e)=>{const o=Vs(s);return hs(()=>o==null?void 0:o[t](e),[o,t,e])},Fa=(s,t=B)=>yn(s,t),va=(s,t=B)=>yn(s,t),ka=s=>b(Pt,V(s),4,[]),Na=s=>b(Pt,V(s),0),po=s=>b(zo,V(s),1),ha=(s,t)=>b(ss,V(t),4,[s]),Ma=(s,t)=>b(ss,V(t),0,[s]),_a=(s,t)=>b(ss+ms,V(t),1,[s]),za=(s,t,e)=>b(ss+ds,V(e),4,[s,t]),Ha=(s,t)=>b(ke,V(t),5,[s]),sc=(s,t)=>b(Ms,V(t),1,[s]),tc=(s,t,e,o=0,c,a)=>b(Ne,V(a),1,[s,t,e,o,c]),Ua=(s,t,e)=>b(as,V(e),4,[s,t]),Wa=(s,t,e)=>b(as,V(e),0,[s,t]),ec=(s,t,e)=>b(ms,V(e),1,[s,t]),ja=(s,t,e,o)=>b(ds,V(o),4,[s,t,e]),nc=(s,t,e,o)=>b(ds,V(o),3,[s,t,e]),Ba=s=>b(St,V(s),4,[]),Ja=s=>b(St,V(s),0),oc=s=>b(Ho,V(s),1),Qa=(s,t)=>b(ps,V(t),4,[s]),cc=(s,t)=>b(ps,V(t),3,[s]),Ga=(s,t,e,o,c)=>nt(e,Pt,s,t,o,c),Ya=(s,t,e,o,c,a)=>nt(o,ss,t,e,c,a,s),qa=(s,t,e,o,c,a,u)=>nt(c,as,e,o,a,u,s,t),Ka=(s,t,e=B,o,c=Vt,a=B,u=!0)=>{const T=V(o);return hs(L=>ws(T,S=>ws(t(L,S),y=>c(S.addRow(Rn(s)?s(L,S):s,y,u),S,y))),[T,s,...e,...a,u])},Oa=(s,t,e,o,c,a,u)=>nt(c,Uo+as,e,o,a,u,s,t),Xa=(s,t,e,o,c,a,u,T)=>nt(a,ds,o,c,u,T,s,t,e),Za=(s,t,e,o,c)=>nt(e,St,s,t,o,c),xa=(s,t,e,o,c)=>nt(e,Uo+St,s,t,o,c),Ia=(s,t,e,o,c,a)=>nt(o,ps,t,e,c,a,s),ma=(s,t,e)=>Dt(s,Pt,t,e),pa=(s,t,e,o)=>Dt(t,ss,e,o,s),si=(s,t,e,o,c)=>Dt(e,as,o,c,s,t),ti=(s,t,e,o,c,a,u)=>Dt(c,ds,a,u,s,t,e,o),ei=(s,t,e)=>Dt(s,St,t,e),ni=(s,t,e,o)=>Dt(t,ps,e,o,s),oi=(s,t,e,o)=>P(Is+Pt,V(o),s,t,[],e),ci=(s,t,e,o)=>P(Pt,V(o),s,t,B,e),ri=(s,t,e,o)=>P(zo,V(o),s,t,B,e),ai=(s,t,e,o,c)=>P(Is+ss,V(c),t,e,[s],o),ii=(s,t,e,o,c)=>P(ss,V(c),t,e,[s],o),li=(s,t,e,o,c)=>P(ss+ms,V(c),t,e,[s],o),ui=(s,t,e,o,c,a)=>P(Is+ss+ds,V(a),e,o,[s,t],c),Ci=(s,t,e,o,c)=>P(ke,V(c),t,e,[s],o),Si=(s,t,e,o,c)=>P(Ms,V(c),t,e,[s],o),Li=(s,t,e,o,c,a,u,T,L)=>P(Ne,V(L),a,u,[s,t,e,o,c],T),fi=(s,t,e,o,c,a)=>P(Is+as,V(a),e,o,[s,t],c),Ti=(s,t,e,o,c,a)=>P(as,V(a),e,o,[s,t],c),Ri=(s,t,e,o,c,a)=>P(ms,V(a),e,o,[s,t],c),yi=(s,t,e,o,c,a,u)=>P(Is+ds,V(u),o,c,[s,t,e],a),$i=(s,t,e,o,c,a,u)=>P(ds,V(u),o,c,[s,t,e],a),wi=(s,t,e,o)=>P(Is+St,V(o),s,t,[],e),di=(s,t,e,o)=>P(St,V(o),s,t,B,e),Ei=(s,t,e,o)=>P(Ho,V(o),s,t,B,e),Vi=(s,t,e,o,c)=>P(Is+ps,V(c),t,e,[s],o),gi=(s,t,e,o,c)=>P(ps,V(c),t,e,[s],o),Ai=(s,t,e)=>P("Start"+fn,V(e),s,t),bi=(s,t,e)=>P("Will"+Wo+fn,V(e),s,t),Pi=(s,t,e)=>P("Did"+Wo+fn,V(e),s,t),Di=(s,t,e)=>qt(s,t,e),Fi=s=>b(Tn+rs,Ue(s),1),rc=(s,t)=>b(Tn,Ue(t),3,[s]),vi=(s,t,e,o)=>P(Tn,Ue(o),t,e,[s]),ki=(s,t,e)=>qt(s,t,e),ac=(s,t)=>b(Me+rs,Lt(t),1,[s]),Ni=s=>b(jr+rs,Lt(s),1),ic=(s,t,e)=>b(Me+Ms,Lt(e),1,[s,t]),hi=(s,t,e,o)=>P(Me+rs,Lt(o),t,e,[s]),Mi=(s,t,e,o,c)=>P(Me+Ms,Lt(c),e,o,[s,t]),_i=(s,t,e)=>qt(s,t,e),zi=s=>b(Br+rs,_s(s),1),lc=(s,t,e)=>b(jo,_s(e),3,[s,t]),uc=(s,t,e)=>b(Bo+Ms,_s(e),1,[s,t]),Cc=(s,t,e)=>b(Jo+Ms,_s(e),1,[s,t]),Hi=(s,t,e,o,c)=>P(jo,_s(c),e,o,[s,t]),Ui=(s,t,e,o,c)=>P(Bo+Ms,_s(c),e,o,[s,t]),Wi=(s,t,e,o,c)=>P(Jo+Ms,_s(c),e,o,[s,t]),ji=(s,t,e)=>qt(s,t,e),Bi=s=>b(Jr+rs,x(s),1),Ji=(s,t)=>b(p+ss,x(t),0,[s]),Qi=(s,t)=>b(p+ss+ms,x(t),1,[s]),Gi=(s,t)=>b(p+ke,x(t),5,[s]),Sc=(s,t)=>b(p+Ms,x(t),1,[s]),Lc=(s,t,e,o=0,c,a)=>b(p+Ne,x(a),1,[s,t,e,o,c]),Yi=(s,t,e)=>b(p+as,x(e),0,[s,t]),fc=(s,t,e)=>b(p+ms,x(e),1,[s,t]),Tc=(s,t,e,o)=>b(p+ds,x(o),3,[s,t,e]),qi=(s,t,e,o)=>P(p+ss,x(o),t,e,[s]),Ki=(s,t,e,o)=>P(p+ss+ms,x(o),t,e,[s]),Oi=(s,t,e,o)=>P(p+ke,x(o),t,e,[s]),Xi=(s,t,e,o)=>P(p+Ms,x(o),t,e,[s]),Zi=(s,t,e,o,c,a,u,T)=>P(p+Ne,x(T),a,u,[s,t,e,o,c]),xi=(s,t,e,o,c)=>P(p+as,x(c),e,o,[s,t]),Ii=(s,t,e,o,c)=>P(p+ms,x(c),e,o,[s,t]),mi=(s,t,e,o,c,a)=>P(p+ds,x(a),o,c,[s,t,e]),pi=(s,t,e)=>qt(s,t,e),We=s=>b(_e+rs,Vs(s),2),Rc=(s,t)=>b(_e,Vs(t),3,[s]),sl=(s=Vt,t=B,e,o=Vt,c=B)=>{const a=Vs(e);return hs(u=>ws(a,T=>{const L=s(u);o(T.addCheckpoint(L),T,L)}),[a,...t,...c])},yc=s=>mo(s,"goBackward"),$c=s=>mo(s,"goForward"),tl=(s,t=B,e,o=Vt,c=B)=>{const a=Vs(e);return hs(u=>ws(a,T=>ws(s(u),L=>o(T.goTo(L),L))),[a,...t,...c])},el=s=>{const t=Vs(s),[e,o]=We(t);return[!qr(e),yc(t),o,ws(o,c=>t==null?void 0:t.getCheckpoint(c))??Ss]},nl=s=>{const t=Vs(s),[,,[e]]=We(t);return[!$s(e),$c(t),e,ws(e,o=>t==null?void 0:t.getCheckpoint(o))??Ss]},ol=(s,t,e)=>P(_e+rs,Vs(e),s,t),cl=(s,t,e,o)=>P(_e,Vs(o),t,e,[s]),rl=(s,t,e=B,o,c=B,a,u=B)=>{const[,T]=At(),[L,S]=At();return gt(()=>{(async()=>{const y=s?await t(s):void 0;S(y),y&&o&&(async()=>(await o(y),T([])))()})()},[s,...e,...c]),gt(()=>()=>{L&&(L.destroy(),a==null||a(L))},[L,...u]),L},al=s=>b(he,$n(s),5,[]),il=(s,t,e)=>P(he,$n(e),s,t,[]),ll=(s,t,e=B,o,c=B)=>{const[a,u]=At();return gt(()=>{(async()=>{const T=s?await t(s):void 0;u(T)})()},[s,...e]),gt(()=>()=>{a&&(a.destroy(),o==null||o(a))},[a,...c]),a},ul=s=>b(he,wn(s),5,[]),Cl=(s,t,e)=>P(he,wn(e),s,t,[]),Os=(s,t,e,o,c)=>[e??t[s*2],{...t[s*2+1],...o,...c[s]}],wc=({tableId:s,store:t,rowComponent:e=Kt,getRowComponentProps:o,customCellIds:c,separator:a,debugIds:u},T)=>ts(is(T,L=>Ls(e,{...Es(o,L),key:L,tableId:s,rowId:L,customCellIds:c,store:t,debugIds:u})),a,u,s),dc=({queryId:s,queries:t,resultRowComponent:e=Dc,getResultRowComponentProps:o,separator:c,debugIds:a},u)=>ts(is(u,T=>Ls(e,{...Es(o,T),key:T,queryId:s,rowId:T,queries:t,debugIds:a})),c,a,s),Ec=({relationshipId:s,relationships:t,rowComponent:e=Kt,getRowComponentProps:o,separator:c,debugIds:a},u,T)=>{const[L,S,y]=Yo(_s(t),s),$=u(s,T,L);return ts(is($,d=>Ls(e,{...Es(o,d),key:d,tableId:y,rowId:d,store:S,debugIds:a})),c,a,T)},dn=s=>({checkpoints:t,checkpointComponent:e=Fc,getCheckpointComponentProps:o,separator:c,debugIds:a})=>{const u=Vs(t);return ts(is(s(We(u)),T=>Ls(e,{...Es(o,T),key:T,checkpoints:u,checkpointId:T,debugIds:a})),c)},Sl=({store:s,storesById:t,metrics:e,metricsById:o,indexes:c,indexesById:a,relationships:u,relationshipsById:T,queries:L,queriesById:S,checkpoints:y,checkpointsById:$,persister:d,persistersById:g,synchronizer:A,synchronizersById:N,children:H})=>{const W=ze(Qt),[j,fs]=At(()=>Yr(8,()=>({}))),gs=hs((Z,F,v)=>fs(ls=>Ko(ls[Z],F)==v?ls:yo(ls,Z,{...ls[Z],[F]:v})),[]),Ts=hs((Z,F)=>fs(v=>Oo(v[Z],F)?yo(v,Z,pr(v[Z],F)):v),[]);return Ls(Qt.Provider,{value:yn(()=>[...Os(0,W,s,t,j),...Os(1,W,e,o,j),...Os(2,W,c,a,j),...Os(3,W,u,T,j),...Os(4,W,L,S,j),...Os(5,W,y,$,j),...Os(6,W,d,g,j),...Os(7,W,A,N,j),gs,Ts],[j,s,t,e,o,c,a,u,T,L,S,y,$,d,g,A,N,W,gs,Ts])},H)},ts=(s,t,e,o)=>{const c=$s(t)||!Gr(s)?s:is(s,(a,u)=>u>0?[t,a]:a);return e?[o,":{",c,"}"]:c},Ll=(s,t,e,o)=>{const c=ec(t,e,o);return s??c},Vc=({tableId:s,rowId:t,cellId:e,store:o,debugIds:c})=>ts(Ss+(nc(s,t,e,o)??Ss),void 0,c,e),Kt=({tableId:s,rowId:t,store:e,cellComponent:o=Vc,getCellComponentProps:c,customCellIds:a,separator:u,debugIds:T})=>ts(is(Ll(a,s,t,e),L=>Ls(o,{...Es(c,L),key:L,tableId:s,rowId:t,cellId:L,store:e,debugIds:T})),u,T,t),gc=s=>wc(s,sc(s.tableId,s.store)),fl=({cellId:s,descending:t,offset:e,limit:o,...c})=>wc(c,tc(c.tableId,s,t,e,o,c.store)),Tl=({store:s,tableComponent:t=gc,getTableComponentProps:e,separator:o,debugIds:c})=>ts(is(po(s),a=>Ls(t,{...Es(e,a),key:a,tableId:a,store:s,debugIds:c})),o),Ac=({valueId:s,store:t,debugIds:e})=>ts(Ss+(cc(s,t)??Ss),void 0,e,s),Rl=({store:s,valueComponent:t=Ac,getValueComponentProps:e,separator:o,debugIds:c})=>ts(is(oc(s),a=>Ls(t,{...Es(e,a),key:a,valueId:a,store:s,debugIds:c})),o),yl=({metricId:s,metrics:t,debugIds:e})=>ts(rc(s,t)??Ss,void 0,e,s),bc=({indexId:s,sliceId:t,indexes:e,rowComponent:o=Kt,getRowComponentProps:c,separator:a,debugIds:u})=>{const[T,L,S]=Ir(Lt(e),s),y=ic(s,t,T);return ts(is(y,$=>Ls(o,{...Es(c,$),key:$,tableId:S,rowId:$,store:L,debugIds:u})),a,u,t)},$l=({indexId:s,indexes:t,sliceComponent:e=bc,getSliceComponentProps:o,separator:c,debugIds:a})=>ts(is(ac(s,t),u=>Ls(e,{...Es(o,u),key:u,indexId:s,sliceId:u,indexes:t,debugIds:a})),c,a,s),wl=({relationshipId:s,localRowId:t,relationships:e,rowComponent:o=Kt,getRowComponentProps:c,debugIds:a})=>{const[u,T,,L]=Yo(_s(e),s),S=lc(s,t,u);return ts($s(L)||$s(S)?null:Ls(o,{...Es(c,S),key:S,tableId:L,rowId:S,store:T,debugIds:a}),void 0,a,t)},dl=s=>Ec(s,uc,s.remoteRowId),El=s=>Ec(s,Cc,s.firstRowId),Pc=({queryId:s,rowId:t,cellId:e,queries:o,debugIds:c})=>ts(Ss+(Tc(s,t,e,o)??Ss),void 0,c,e),Dc=({queryId:s,rowId:t,queries:e,resultCellComponent:o=Pc,getResultCellComponentProps:c,separator:a,debugIds:u})=>ts(is(fc(s,t,e),T=>Ls(o,{...Es(c,T),key:T,queryId:s,rowId:t,cellId:T,queries:e,debugIds:u})),a,u,t),Vl=s=>dc(s,Sc(s.queryId,s.queries)),gl=({cellId:s,descending:t,offset:e,limit:o,...c})=>dc(c,Lc(c.queryId,s,t,e,o,c.queries)),Fc=({checkpoints:s,checkpointId:t,debugIds:e})=>ts(Rc(t,s)??Ss,void 0,e,t),Al=dn(s=>s[0]),bl=dn(s=>$s(s[1])?[]:[s[1]]),Pl=dn(s=>s[2]),tC=Object.freeze(Object.defineProperty({__proto__:null,BackwardCheckpointsView:Al,CellView:Vc,CheckpointView:Fc,CurrentCheckpointView:bl,ForwardCheckpointsView:Pl,IndexView:$l,LinkedRowsView:El,LocalRowsView:dl,MetricView:yl,Provider:Sl,RemoteRowView:wl,ResultCellView:Pc,ResultRowView:Dc,ResultSortedTableView:gl,ResultTableView:Vl,RowView:Kt,SliceView:bc,SortedTableView:fl,TableView:gc,TablesView:Tl,ValueView:Ac,ValuesView:Rl,useAddRowCallback:Ka,useCell:nc,useCellIds:ec,useCellIdsListener:Ri,useCellListener:$i,useCheckpoint:Rc,useCheckpointIds:We,useCheckpointIdsListener:ol,useCheckpointListener:cl,useCheckpoints:$a,useCheckpointsIds:ya,useCheckpointsOrCheckpointsById:Vs,useCreateCheckpoints:pi,useCreateIndexes:ki,useCreateMergeableStore:va,useCreateMetrics:Di,useCreatePersister:rl,useCreateQueries:ji,useCreateRelationships:_i,useCreateStore:Fa,useCreateSynchronizer:ll,useDelCellCallback:ti,useDelRowCallback:si,useDelTableCallback:pa,useDelTablesCallback:ma,useDelValueCallback:ni,useDelValuesCallback:ei,useDidFinishTransactionListener:Pi,useGoBackwardCallback:yc,useGoForwardCallback:$c,useGoToCallback:tl,useHasCell:ja,useHasCellListener:yi,useHasRow:Ua,useHasRowListener:fi,useHasTable:ha,useHasTableCell:za,useHasTableCellListener:ui,useHasTableListener:ai,useHasTables:ka,useHasTablesListener:oi,useHasValue:Qa,useHasValueListener:Vi,useHasValues:Ba,useHasValuesListener:wi,useIndexIds:Ni,useIndexes:la,useIndexesIds:ia,useIndexesOrIndexesById:Lt,useLinkedRowIds:Cc,useLinkedRowIdsListener:Wi,useLocalRowIds:uc,useLocalRowIdsListener:Ui,useMetric:rc,useMetricIds:Fi,useMetricListener:vi,useMetrics:ra,useMetricsIds:ca,useMetricsOrMetricsById:Ue,usePersister:Ea,usePersisterIds:da,usePersisterOrPersisterById:$n,usePersisterStatus:al,usePersisterStatusListener:il,useProvideCheckpoints:wa,useProvideIndexes:ua,useProvideMetrics:aa,useProvidePersister:Va,useProvideQueries:Ra,useProvideRelationships:La,useProvideStore:oa,useProvideSynchronizer:ba,useQueries:Ta,useQueriesIds:fa,useQueriesOrQueriesById:x,useQueryIds:Bi,useRedoInformation:nl,useRelationshipIds:zi,useRelationships:Sa,useRelationshipsIds:Ca,useRelationshipsOrRelationshipsById:_s,useRemoteRowId:lc,useRemoteRowIdListener:Hi,useResultCell:Tc,useResultCellIds:fc,useResultCellIdsListener:Ii,useResultCellListener:mi,useResultRow:Yi,useResultRowCount:Gi,useResultRowCountListener:Oi,useResultRowIds:Sc,useResultRowIdsListener:Xi,useResultRowListener:xi,useResultSortedRowIds:Lc,useResultSortedRowIdsListener:Zi,useResultTable:Ji,useResultTableCellIds:Qi,useResultTableCellIdsListener:Ki,useResultTableListener:qi,useRow:Wa,useRowCount:Ha,useRowCountListener:Ci,useRowIds:sc,useRowIdsListener:Si,useRowListener:Ti,useSetCellCallback:Xa,useSetCheckpointCallback:sl,useSetPartialRowCallback:Oa,useSetPartialValuesCallback:xa,useSetRowCallback:qa,useSetTableCallback:Ya,useSetTablesCallback:Ga,useSetValueCallback:Ia,useSetValuesCallback:Za,useSliceIds:ac,useSliceIdsListener:hi,useSliceRowIds:ic,useSliceRowIdsListener:Mi,useSortedRowIds:tc,useSortedRowIdsListener:Li,useStartTransactionListener:Ai,useStore:na,useStoreIds:ea,useStoreOrStoreById:V,useSynchronizer:Aa,useSynchronizerIds:ga,useSynchronizerOrSynchronizerById:wn,useSynchronizerStatus:ul,useSynchronizerStatusListener:Cl,useTable:Ma,useTableCellIds:_a,useTableCellIdsListener:li,useTableIds:po,useTableIdsListener:ri,useTableListener:ii,useTables:Na,useTablesListener:ci,useUndoInformation:el,useValue:cc,useValueIds:oc,useValueIdsListener:Ei,useValueListener:gi,useValues:Ja,useValuesListener:di,useWillFinishTransactionListener:bi},Symbol.toStringTag,{value:"Module"})),at=s=>typeof s,bt="",Dl=at(bt),Fl=at(!0),vc=at(0),vl=at(at),Ce="type",ot="default",kl="Listener",Nl="add",ct="Has",je="Ids",Et="Table",Vo=Et+"s",hl=Et+je,Ve="Row",Ml=Ve+"Count",_l=Ve+je,Ee="Cell",go=Ee+je,ge="Value",Ao=ge+"s",zl=ge+je,z=s=>bt+s,Hl=isFinite,Ul=(s,t)=>s instanceof t,X=s=>s==null,O=(s,t,e)=>X(s)?e==null?void 0:e():t(s),kc=s=>s==Dl||s==Fl,bo=s=>at(s)==vl,Nc=s=>Array.isArray(s),Po=(s,t,e)=>s.slice(t,e),Us=s=>s.length,Wl=(s,t)=>s.test(t),jl=(s,t)=>s.includes(t),Bl=(s,t)=>s.every(t),Jl=(s,t)=>Us(s)===Us(t)&&Bl(s,(e,o)=>t[o]===e),Ql=(s,t)=>s.sort(t),Ae=(s,t)=>s.forEach(t),be=(s,t)=>s.map(t),Gl=(s,t,e)=>s.reduce(t,e),Pe=(s,...t)=>s.push(...t),Yl=s=>s.shift(),ft=Object,Do=s=>ft.getPrototypeOf(s),ql=ft.entries,Kl=ft.isFrozen,hc=s=>!X(s)&&O(Do(s),t=>t==ft.prototype||X(Do(t)),()=>!0),Ol=ft.keys,Xl=ft.freeze,Ht=(s,t)=>t in s,Mc=(s,t)=>(delete s[t],s),Hs=(s,t)=>be(ql(s),([e,o])=>t(o,e)),Zl=s=>Us(Ol(s)),vs=s=>hc(s)&&Zl(s)==0,Xs=(s,t,e,o=0)=>X(s)||!hc(s)||!o&&vs(s)||Kl(s)?(e==null||e(),!1):(Hs(s,(c,a)=>{t(c,a)||Mc(s,a)}),o?!0:!vs(s)),En=s=>t=>Gl(xl(t),(e,o)=>e+s(o),0),Vn=s=>(s==null?void 0:s.size)??0,gn=En(Vn),Ut=En(gn),me=En(Ut),es=(s,t)=>(s==null?void 0:s.has(t))??!1,D=s=>X(s)||Vn(s)==0,xl=s=>[...(s==null?void 0:s.values())??[]],pe=s=>s.clear(),_=(s,t)=>s==null?void 0:s.forEach(t),De=(s,t)=>s==null?void 0:s.delete(t),k=s=>new Map(s),Mt=s=>[...(s==null?void 0:s.keys())??[]],w=(s,t)=>s==null?void 0:s.get(t),Zs=(s,t)=>_(s,(e,o)=>t(o,e)),Il=(s,t)=>be([...(s==null?void 0:s.entries())??[]],([e,o])=>t(o,e)),U=(s,t,e)=>X(e)?(De(s,t),s):s==null?void 0:s.set(t,e),I=(s,t,e,o)=>(es(s,t)?o==null||o(w(s,t)):U(s,t,e()),w(s,t)),rt=(s,t,e,o=U)=>(Hs(t,(c,a)=>e(s,a,c)),Zs(s,c=>Ht(t,c)?0:o(s,c)),s),os=(s,t,e,o)=>{const c={};return _(s,(a,u)=>{if(!(e!=null&&e(a,u))){const T=t?t(a,u):a;o!=null&&o(T)||(c[u]=T)}}),c},en=(s,t,e)=>os(s,o=>os(o,t,e),D,vs),Se=(s,t,e)=>os(s,o=>en(o,t,e),D,vs),xs=(s,t)=>{const e=k();return _(s,(o,c)=>e.set(c,(t==null?void 0:t(o))??o)),e},nn=s=>xs(s,xs),sn=s=>xs(s,nn),on=(s,t,e,o,c=0)=>O((e?I:w)(s,t[c],c>Us(t)-2?e:k),a=>{if(c>Us(t)-2)return o!=null&&o(a)&&U(s,t[c]),a;const u=on(a,t,e,o,c+1);return D(a)&&U(s,t[c]),u}),_t=s=>{const t=at(s);return kc(t)||t==vc&&Hl(s)?t:void 0},Fo=(s,t,e,o,c)=>X(c)?s.delCell(t,e,o,!0):s.setCell(t,e,o,c),vo=(s,t,e)=>X(e)?s.delValue(t):s.setValue(t,e),Wt=s=>new Set(Nc(s)||X(s)?s:[s]),jt=(s,t)=>s==null?void 0:s.add(t),ml=/^\d+$/,_c=()=>{const s=[];let t=0;return[e=>(e?Yl(s):null)??bt+t++,e=>{Wl(ml,e)&&Us(s)<1e3&&Pe(s,e)}]},pl=(s,t=[bt])=>{const e=[],o=(c,a)=>a==Us(t)?Pe(e,c):t[a]===null?_(c,u=>o(u,a+1)):Ae([t[a],null],u=>o(w(c,u),a+1));return o(s,0),e},su=s=>{let t;const[e,o]=_c(),c=k();return[(S,y,$,d=[],g=()=>[])=>{t??(t=s());const A=e(1);return U(c,A,[S,y,$,d,g]),jt(on(y,$??[bt],Wt),A),A},(S,y,...$)=>Ae(pl(S,y),d=>_(d,g=>w(c,g)[0](t,...y??[],...$))),S=>O(w(c,S),([,y,$])=>(on(y,$??[bt],void 0,d=>(De(d,S),D(d)?1:0)),U(c,S),o(S),$)),S=>O(w(c,S),([y,,$=[],d,g])=>{const A=(...N)=>{var W;const H=Us(N);H==Us($)?y(t,...N,...g(N)):X($[H])?Ae(((W=d[H])==null?void 0:W.call(d,...N))??[],j=>A(...N,j)):A(...N,$[H])};A()})]},tu=(s,t)=>(s??0)<(t??0)?-1:1,Le=s=>[s,s],Y=(s,t=gn)=>t(s[0])+t(s[1]),q=()=>[k(),k()],ko=s=>[...s],fe=([s,t])=>s===t,eu=JSON.stringify,tn=JSON.parse,dt=s=>eu(s,(t,e)=>Ul(e,Map)?ft.fromEntries([...e]):e),zt=(s,t,e)=>U(s,t,w(s,t)==-e?void 0:e),nu=()=>{let s,t,e=!1,o=!1,c=0,a=[];const u=k(),T=k(),L=k(),S=k(),y=k(),$=k(),d=k(),g=k(),A=k(),N=k(),H=k(),W=k(),j=k(),fs=k(),gs=Wt(),Ts=k(),Z=k(),F=k(),v=k(),ls=q(),As=q(),bs=q(),js=q(),us=q(),Bs=q(),Ps=q(),Js=q(),Ds=q(),zs=q(),Qs=q(),Gs=q(),Ys=q(),Cs=q(),Tt=q(),Rt=q(),yt=q(),Q=q(),R=q(),J=q(),Fs=q(),Zt=q(),Qe=k(),Ft=q(),[$t,K,Xc,Zc]=su(()=>m),xc=n=>Xs(n,r=>Xs(r,Pn)),Ic=n=>Xs(n,Pn),Pn=n=>{if(!Xs(n,(i,l)=>jl([Ce,ot],l)))return!1;const r=n[Ce];return!kc(r)&&r!=vc?!1:(_t(n[ot])!=r&&Mc(n,ot),!0)},mc=Nc,pc=n=>Xs(n,Dn,qs),Dn=(n,r)=>(!s||es(H,r)||qs(r))&&Xs(n,(i,l)=>xt(r,l,i),()=>qs(r)),xt=(n,r,i,l)=>Xs(l?i:Nn(i,n,r),(C,f)=>O(Fn(n,r,f,C),E=>(i[f]=E,!0),()=>!1),()=>qs(n,r)),Fn=(n,r,i,l)=>s?O(w(w(H,n),i),C=>_t(l)!=C[Ce]?qs(n,r,i,l,C[ot]):l,()=>qs(n,r,i,l)):X(_t(l))?qs(n,r,i,l):l,vn=(n,r)=>Xs(r?n:sr(n),(i,l)=>O(kn(l,i),C=>(n[l]=C,!0),()=>!1),()=>kt()),kn=(n,r)=>t?O(w(j,n),i=>_t(r)!=i[Ce]?kt(n,r,i[ot]):r,()=>kt(n,r)):X(_t(r))?kt(n,r):r,Nn=(n,r,i)=>(O(w(W,r),([l,C])=>{_(l,(f,E)=>{Ht(n,E)||(n[E]=f)}),_(C,f=>{Ht(n,f)||qs(r,i,f)})}),n),sr=n=>(t&&(_(fs,(r,i)=>{Ht(n,i)||(n[i]=r)}),_(gs,r=>{Ht(n,r)||kt(r)})),n),hn=n=>rt(H,n,(r,i,l)=>{const C=k(),f=Wt();rt(I(H,i,k),l,(E,h,M)=>{U(E,h,M),O(M[ot],ns=>U(C,h,ns),()=>jt(f,h))}),U(W,i,[C,f])},(r,i)=>{U(H,i),U(W,i)}),Mn=n=>rt(j,n,(r,i,l)=>{U(j,i,l),O(l[ot],C=>U(fs,i,C),()=>jt(gs,i))},(r,i)=>{U(j,i),U(fs,i),De(gs,i)}),_n=n=>vs(n)?ae():ce(n),tr=([n,r])=>{(vs(n)?ae:ce)(n),(vs(r)?ie:re)(r)},zn=n=>rt(F,n,(r,i,l)=>It(i,l),(r,i)=>Bn(i)),It=(n,r)=>rt(I(F,n,()=>(Yn(n,1),U(Ts,n,_c()),U(Z,n,k()),k())),r,(i,l,C)=>vt(n,i,l,C),(i,l)=>Jn(n,i,l)),vt=(n,r,i,l,C)=>rt(I(r,i,()=>(qn(n,i,1),k())),l,(f,E,h)=>Ge(n,i,f,E,h),(f,E)=>Qn(n,r,i,f,E,C)),Ge=(n,r,i,l,C)=>{es(i,l)||Kn(n,r,l,1);const f=w(i,l);C!==f&&(On(n,r,l,f,C),U(i,l,C))},Hn=(n,r,i,l,C)=>O(w(r,i),f=>Ge(n,i,f,l,C),()=>vt(n,r,i,Nn({[l]:C},n,i))),Un=n=>vs(n)?ie():re(n),Wn=n=>rt(v,n,(r,i,l)=>mt(i,l),(r,i)=>Gn(i)),mt=(n,r)=>{es(v,n)||Xn(n,1);const i=w(v,n);r!==i&&(Zn(n,i,r),U(v,n,r))},jn=(n,r)=>{const[i]=w(Ts,n),l=i(r);return es(w(F,n),l)?jn(n,r):l},pt=n=>w(F,n)??It(n,{}),Bn=n=>It(n,{}),Jn=(n,r,i)=>{const[,l]=w(Ts,n);l(i),vt(n,r,i,{},!0)},Qn=(n,r,i,l,C,f)=>{var M;const E=w((M=w(W,n))==null?void 0:M[0],C);if(!X(E)&&!f)return Ge(n,i,l,C,E);const h=ns=>{On(n,i,ns,w(l,ns)),Kn(n,i,ns,-1),U(l,ns)};X(E)?h(C):Zs(l,h),D(l)&&(qn(n,i,-1),D(U(r,i))&&(Yn(n,-1),U(F,n),U(Ts,n),U(Z,n)))},Gn=n=>{const r=w(fs,n);if(!X(r))return mt(n,r);Zn(n,w(v,n)),Xn(n,-1),U(v,n)},Yn=(n,r)=>zt(u,n,r),qn=(n,r,i)=>zt(I(S,n,k),r,i)&&U(L,n,I(L,n,()=>0)+i),Kn=(n,r,i,l)=>{const C=w(Z,n),f=w(C,i)??0;(f==0&&l==1||f==1&&l==-1)&&zt(I(T,n,k),i,l),U(C,i,f!=-l?f+l:null),zt(I(I(y,n,k),r,k),i,l)},On=(n,r,i,l,C)=>{var f;I(I(I($,n,k),r,k),i,()=>[l,0])[1]=C,(f=a[3])==null||f.call(a,n,r,i,C)},Xn=(n,r)=>zt(d,n,r),Zn=(n,r,i)=>{var l;I(g,n,()=>[r,0])[1]=i,(l=a[4])==null||l.call(a,n,i)},qs=(n,r,i,l,C)=>(Pe(I(I(I(A,n,k),r,k),i,()=>[]),l),C),kt=(n,r,i)=>(Pe(I(N,n,()=>[]),r),i),se=(n,r,i)=>O(w(w(w($,n),r),i),([l,C])=>[!0,l,C],()=>[!1,...Le(te(n,r,i))]),xn=n=>O(w(g,n),([r,i])=>[!0,r,i],()=>[!1,...Le(ee(n))]),In=n=>!D(A)&&!D(Rt[n])?_(n?sn(A):A,(r,i)=>_(r,(l,C)=>_(l,(f,E)=>K(Rt[n],[i,C,E],f)))):0,mn=n=>!D(N)&&!D(yt[n])?_(n?xs(N):N,(r,i)=>K(yt[n],[i],r)):0,Nt=(n,r,i,l)=>{if(!D(n))return K(r,l,()=>os(n)),Zs(n,(C,f)=>K(i,[...l??[],C],f==1)),1},pn=n=>{const r=ne();r!=e&&K(ls[n],void 0,r);const i=D(zs[n]),l=D(Ys[n])&&D(Cs[n])&&D(Ds[n])&&D(Qs[n])&&D(Bs[n])&&D(Ps[n])&&D(Js[n])&&i&&D(bs[n])&&D(js[n]),C=D(Tt[n])&&D(Gs[n])&&D(us[n])&&D(As[n]);if(!l||!C){const f=n?[xs(u),nn(T),xs(L),nn(S),sn(y),sn($)]:[u,T,L,S,y,$];if(!l){Nt(f[0],bs[n],js[n]),_(f[1],(h,M)=>Nt(h,Bs[n],Ps[n],[M])),_(f[2],(h,M)=>{h!=0&&K(Js[n],[M],eo(M))});const E=Wt();_(f[3],(h,M)=>{Nt(h,Ds[n],Qs[n],[M])&&!i&&(K(zs[n],[M,null]),jt(E,M))}),i||_(f[5],(h,M)=>{if(!es(E,M)){const ns=Wt();_(h,Ks=>_(Ks,([le,ue],ht)=>ue!==le?jt(ns,ht):De(Ks,ht))),_(ns,Ks=>K(zs[n],[M,Ks]))}}),_(f[4],(h,M)=>_(h,(ns,Ks)=>Nt(ns,Ys[n],Cs[n],[M,Ks])))}if(!C){let E;_(f[5],(h,M)=>{let ns;_(h,(Ks,le)=>{let ue;_(Ks,([ht,Ro],Fr)=>{Ro!==ht&&(K(Tt[n],[M,le,Fr],Ro,ht,se),E=ns=ue=1)}),ue&&K(Gs[n],[M,le],se)}),ns&&K(us[n],[M],se)}),E&&K(As[n],void 0,se)}}},so=n=>{const r=oe();r!=o&&K(Q[n],void 0,r);const i=D(J[n])&&D(Fs[n]),l=D(Zt[n])&&D(R[n]);if(!i||!l){const C=n?[xs(d),xs(g)]:[d,g];if(i||Nt(C[0],J[n],Fs[n]),!l){let f;_(C[1],([E,h],M)=>{h!==E&&(K(Zt[n],[M],h,E,xn),f=1)}),f&&K(R[n],void 0,xn)}}},G=(n,...r)=>(xe(()=>n(...be(r,z))),m),er=()=>[Ye(),Oe()],Ye=()=>Se(F),cs=()=>Mt(F),nr=n=>en(w(F,z(n))),to=n=>Mt(w(Z,z(n))),eo=n=>Vn(w(F,z(n))),wt=n=>Mt(w(F,z(n))),qe=(n,r,i,l=0,C)=>be(Po(Ql(Il(w(F,z(n)),(f,E)=>[X(r)?E:w(f,z(r)),E]),([f],[E])=>tu(f,E)*(i?-1:1)),l,X(C)?C:l+C),([,f])=>f),or=(n,r)=>os(w(w(F,z(n)),z(r))),Ke=(n,r)=>Mt(w(w(F,z(n)),z(r))),te=(n,r,i)=>w(w(w(F,z(n)),z(r)),z(i)),Oe=()=>os(v),Xe=()=>Mt(v),ee=n=>w(v,z(n)),ne=()=>!D(F),no=n=>es(F,z(n)),oo=(n,r)=>es(w(Z,z(n)),z(r)),co=(n,r)=>es(w(F,z(n)),z(r)),ro=(n,r,i)=>es(w(w(F,z(n)),z(r)),z(i)),oe=()=>!D(v),ao=n=>es(v,z(n)),cr=()=>dt(F),rr=()=>dt(v),ar=()=>dt([F,v]),ir=()=>dt(H),lr=()=>dt(j),ur=()=>dt([H,j]),Cr=n=>G(()=>mc(n)?tr(n):0),ce=n=>G(()=>pc(n)?zn(n):0),Sr=(n,r)=>G(i=>Dn(r,i)?It(i,r):0,n),Lr=(n,r,i)=>G((l,C)=>xt(l,C,i)?vt(l,pt(l),C,i):0,n,r),fr=(n,r,i=!0)=>xe(()=>{let l;return xt(n,l,r)&&(n=z(n),vt(n,pt(n),l=jn(n,i?1:0),r)),l}),Tr=(n,r,i)=>G((l,C)=>{if(xt(l,C,i,1)){const f=pt(l);Hs(i,(E,h)=>Hn(l,f,C,h,E))}},n,r),Rr=(n,r,i,l)=>G((C,f,E)=>O(Fn(C,f,E,bo(l)?l(te(C,f,E)):l),h=>Hn(C,pt(C),f,E,h)),n,r,i),re=n=>G(()=>vn(n)?Wn(n):0),yr=n=>G(()=>vn(n,1)?Hs(n,(r,i)=>mt(i,r)):0),$r=(n,r)=>G(i=>O(kn(i,bo(r)?r(ee(i)):r),l=>mt(i,l)),n),wr=n=>G(()=>{Hs(n[0],(r,i)=>X(r)?Co(i):Hs(r,(l,C)=>X(l)?So(i,C):Hs(l,(f,E)=>Fo(m,i,C,E,f)))),Hs(n[1],(r,i)=>vo(m,i,r))}),io=n=>{try{_n(tn(n))}catch{}return m},dr=n=>{try{Un(tn(n))}catch{}return m},Er=n=>G(()=>{try{const[r,i]=tn(n);_n(r),Un(i)}catch{io(n)}}),lo=n=>G(()=>{if((s=xc(n))&&(hn(n),!D(F))){const r=Ye();ae(),ce(r)}}),uo=n=>G(()=>{if(t=Ic(n)){const r=Oe();Ze(),ie(),t=!0,Mn(n),re(r)}}),Vr=(n,r)=>G(()=>{lo(n),uo(r)}),ae=()=>G(()=>zn({})),Co=n=>G(r=>es(F,r)?Bn(r):0,n),So=(n,r)=>G((i,l)=>O(w(F,i),C=>es(C,l)?Jn(i,C,l):0),n,r),gr=(n,r,i,l)=>G((C,f,E)=>O(w(F,C),h=>O(w(h,f),M=>es(M,E)?Qn(C,h,f,M,E,l):0)),n,r,i),ie=()=>G(()=>Wn({})),Ar=n=>G(r=>es(v,r)?Gn(r):0,n),Lo=()=>G(()=>{hn({}),s=!1}),Ze=()=>G(()=>{Mn({}),t=!1}),br=()=>G(()=>{Lo(),Ze()}),xe=(n,r)=>{if(c!=-1){fo();const i=n();return To(r),i}},fo=()=>{var n;return c!=-1&&c++,c==1&&((n=a[0])==null||n.call(a),K(Qe)),m},Pr=()=>[os($,(n,r)=>w(u,r)===-1?void 0:os(n,(i,l)=>w(w(S,r),l)===-1?void 0:os(i,([,C])=>C,C=>fe(C)),D,vs),D,vs),os(g,([,n])=>n,n=>fe(n)),1],Dr=()=>[!D($),!D(g),Se($,ko,fe),Se(A),os(g,ko,fe),os(N),os(u),en(S),Se(y),os(d)],To=n=>{var r,i;return c>0&&(c--,c==0&&(c=1,In(1),D($)||pn(1),mn(1),D(g)||so(1),n!=null&&n(m)&&(_($,(l,C)=>_(l,(f,E)=>_(f,([h],M)=>Fo(m,C,E,M,h)))),pe($),_(g,([l],C)=>vo(m,C,l)),pe(g)),K(Ft[0],void 0),c=-1,In(0),D($)||pn(0),mn(0),D(g)||so(0),(r=a[1])==null||r.call(a),K(Ft[1],void 0),(i=a[2])==null||i.call(a),c=0,e=ne(),o=oe(),Ae([u,T,L,S,y,$,A,d,g,N],pe))),m},m={getContent:er,getTables:Ye,getTableIds:cs,getTable:nr,getTableCellIds:to,getRowCount:eo,getRowIds:wt,getSortedRowIds:qe,getRow:or,getCellIds:Ke,getCell:te,getValues:Oe,getValueIds:Xe,getValue:ee,hasTables:ne,hasTable:no,hasTableCell:oo,hasRow:co,hasCell:ro,hasValues:oe,hasValue:ao,getTablesJson:cr,getValuesJson:rr,getJson:ar,getTablesSchemaJson:ir,getValuesSchemaJson:lr,getSchemaJson:ur,hasTablesSchema:()=>s,hasValuesSchema:()=>t,setContent:Cr,setTables:ce,setTable:Sr,setRow:Lr,addRow:fr,setPartialRow:Tr,setCell:Rr,setValues:re,setPartialValues:yr,setValue:$r,applyChanges:wr,setTablesJson:io,setValuesJson:dr,setJson:Er,setTablesSchema:lo,setValuesSchema:uo,setSchema:Vr,delTables:ae,delTable:Co,delRow:So,delCell:gr,delValues:ie,delValue:Ar,delTablesSchema:Lo,delValuesSchema:Ze,delSchema:br,transaction:xe,startTransaction:fo,getTransactionChanges:Pr,getTransactionLog:Dr,finishTransaction:To,forEachTable:n=>_(F,(r,i)=>n(i,l=>_(r,(C,f)=>l(f,E=>Zs(C,E))))),forEachTableCell:(n,r)=>Zs(w(Z,z(n)),r),forEachRow:(n,r)=>_(w(F,z(n)),(i,l)=>r(l,C=>Zs(i,C))),forEachCell:(n,r,i)=>Zs(w(w(F,z(n)),z(r)),i),forEachValue:n=>Zs(v,n),addSortedRowIdsListener:(n,r,i,l,C,f,E)=>{let h=qe(n,r,i,l,C);return $t(()=>{const M=qe(n,r,i,l,C);Jl(M,h)||(h=M,f(m,n,r,i,l,C,h))},zs[E?1:0],[n,r],[cs])},addStartTransactionListener:n=>$t(n,Qe),addWillFinishTransactionListener:n=>$t(n,Ft[0]),addDidFinishTransactionListener:n=>$t(n,Ft[1]),callListener:n=>(Zc(n),m),delListener:n=>(Xc(n),m),getListenerStats:()=>({hasTables:Y(ls),tables:Y(As),tableIds:Y(bs),hasTable:Y(js),table:Y(us),tableCellIds:Y(Bs),hasTableCell:Y(Ps,Ut),rowCount:Y(Js),rowIds:Y(Ds),sortedRowIds:Y(zs),hasRow:Y(Qs,Ut),row:Y(Gs,Ut),cellIds:Y(Ys,Ut),hasCell:Y(Cs,me),cell:Y(Tt,me),invalidCell:Y(Rt,me),hasValues:Y(Q),values:Y(R),valueIds:Y(J),hasValue:Y(Fs),value:Y(Zt),invalidValue:Y(yt),transaction:gn(Qe)+Y(Ft)}),isMergeable:()=>!1,createStore:nu,addListener:$t,callListeners:K,setInternalListeners:(n,r,i,l,C)=>a=[n,r,i,l,C]};return Hs({[ct+Vo]:[0,ls,[],()=>[ne()]],[Vo]:[0,As],[hl]:[0,bs],[ct+Et]:[1,js,[cs],n=>[no(...n)]],[Et]:[1,us,[cs]],[Et+go]:[1,Bs,[cs]],[ct+Et+Ee]:[2,Ps,[cs,to],n=>[oo(...n)]],[Ml]:[1,Js,[cs]],[_l]:[1,Ds,[cs]],[ct+Ve]:[2,Qs,[cs,wt],n=>[co(...n)]],[Ve]:[2,Gs,[cs,wt]],[go]:[2,Ys,[cs,wt]],[ct+Ee]:[3,Cs,[cs,wt,Ke],n=>[ro(...n)]],[Ee]:[3,Tt,[cs,wt,Ke],n=>Le(te(...n))],InvalidCell:[3,Rt],[ct+Ao]:[0,Q,[],()=>[oe()]],[Ao]:[0,R],[zl]:[0,J],[ct+ge]:[1,Fs,[Xe],n=>[ao(...n)]],[ge]:[1,Zt,[Xe],n=>Le(ee(n[0]))],InvalidValue:[1,yt]},([n,r,i,l],C)=>{m[Nl+C+kl]=(...f)=>$t(f[n],r[f[n+1]?1:0],n>0?Po(f,0,n):void 0,i,l)}),Xl(m)},Fe="",zc="￼",ou=globalThis,No=ou.window,ks=s=>s==null,Gt=(s,t,e)=>ks(s)?e==null?void 0:e():t(s),cn=s=>Array.isArray(s),it=s=>s.length,cu=(s,t)=>s.test(t),Hc=s=>{throw new Error(s)},rn=(s,t)=>s.forEach(t),ru=(s,t)=>s.splice(0,t),An=(s,...t)=>s.push(...t),Uc=s=>s.shift(),Be=Object,ho=s=>Be.getPrototypeOf(s),au=s=>!ks(s)&&Gt(ho(s),t=>t==Be.prototype||ks(ho(t)),()=>!0),iu=Be.keys,lu=Be.freeze,uu=s=>it(iu(s)),Te=s=>au(s)&&uu(s)==0,Cu=JSON.stringify,Wc=JSON.parse,Su=s=>Cu(s,(t,e)=>e===void 0?zc:e),Lu=s=>Wc(s,(t,e)=>e===zc?void 0:e),fu=s=>(s==null?void 0:s.size)??0,Tu=(s,t)=>(s==null?void 0:s.has(t))??!1,jc=s=>ks(s)||fu(s)==0,Bc=(s,t)=>s==null?void 0:s.forEach(t),Jc=(s,t)=>s==null?void 0:s.delete(t),Ot=s=>new Map(s),Rs=(s,t)=>s==null?void 0:s.get(t),lt=(s,t,e)=>ks(e)?(Jc(s,t),s):s==null?void 0:s.set(t,e),an=(s,t,e,o)=>(Tu(s,t)?o==null||o(Rs(s,t)):lt(s,t,e()),Rs(s,t)),ln=(s,t,e,o,c=0)=>Gt((e?an:Rs)(s,t[c],c>it(t)-2?e:Ot),a=>{if(c>it(t)-2)return o!=null&&o(a)&&lt(s,t[c]),a;const u=ln(a,t,e,o,c+1);return jc(a)&&lt(s,t[c]),u}),Ru=s=>new Set(cn(s)||ks(s)?s:[s]),yu=(s,t)=>s==null?void 0:s.add(t),$u=/^\d+$/,wu=()=>{const s=[];let t=0;return[e=>(e?Uc(s):null)??Fe+t++,e=>{cu($u,e)&&it(s)<1e3&&An(s,e)}]},du=(s,t=[Fe])=>{const e=[],o=(c,a)=>a==it(t)?An(e,c):t[a]===null?Bc(c,u=>o(u,a+1)):rn([t[a],null],u=>o(Rs(c,u),a+1));return o(s,0),e},Eu=s=>{let t;const[e,o]=wu(),c=Ot();return[(S,y,$,d=[],g=()=>[])=>{t??(t=s());const A=e(1);return lt(c,A,[S,y,$,d,g]),yu(ln(y,$??[Fe],Ru),A),A},(S,y,...$)=>rn(du(S,y),d=>Bc(d,g=>Rs(c,g)[0](t,...y??[],...$))),S=>Gt(Rs(c,S),([,y,$])=>(ln(y,$??[Fe],void 0,d=>(Jc(d,S),jc(d)?1:0)),lt(c,S),o(S),$)),S=>Gt(Rs(c,S),([y,,$=[],d,g])=>{const A=(...N)=>{var W;const H=it(N);H==it($)?y(t,...N,...g(N)):ks($[H])?rn(((W=d[H])==null?void 0:W.call(d,...N))??[],j=>A(...N,j)):A(...N,$[H])};A()})]},Re=Ot(),ye=Ot(),Vu=(s=1,t)=>s!=1&&t.isMergeable()?[1,t.getMergeableContent,t.getTransactionMergeableChanges,([[e],[o]])=>!Te(e)||!Te(o),t.setDefaultContent]:s!=2?[0,t.getContent,t.getTransactionChanges,([e,o])=>!Te(e)||!Te(o),t.setContent]:Hc("Store type not supported by this Persister"),gu=(s,t,e,o,c,a,u,T={},L=[])=>{let S=0,y=0,$=0,d,g,A;an(Re,L,()=>0),an(ye,L,()=>[]);const N=Ot(),[H,W,j,fs,gs]=Vu(u,s),[Ts,Z,F]=Eu(()=>Q),v=R=>{R!=S&&(S=R,Z(N,void 0,S))},ls=async()=>{if(!Rs(Re,L)){for(lt(Re,L,1);!ks(d=Uc(Rs(ye,L)));)try{await d()}catch{}lt(Re,L,0)}},As=R=>{(H&&cn(R==null?void 0:R[0])?(R==null?void 0:R[2])===1?s.applyMergeableChanges:s.setMergeableContent:(R==null?void 0:R[2])===1?s.applyChanges:s.setContent)(R)},bs=async R=>(S!=2&&(v(1),y++,await Cs(async()=>{try{const J=await t();cn(J)?As(J):Hc(`Content is not an array ${J}`)}catch{R&&gs(R)}v(0)})),Q),js=async R=>{await us().load(R);try{g=await o(async(J,Fs)=>{Fs||J?S!=2&&(v(1),y++,As(Fs??J),v(0)):await bs()})}catch{}return Q},us=()=>(g&&(c(g),g=void 0),Q),Bs=()=>!ks(g),Ps=async R=>(S!=1&&(v(2),$++,await Cs(async()=>{try{await e(W,R)}catch{}v(0)})),Q),Js=async()=>(await Ds().save(),A=s.addDidFinishTransactionListener(()=>{const R=j();fs(R)&&Ps(R)}),Q),Ds=()=>(Gt(A,s.delListener),A=void 0,Q),zs=()=>!ks(A),Qs=()=>S,Gs=R=>Ts(R,N),Ys=R=>(F(R),s),Cs=async(...R)=>(An(Rs(ye,L),...R),await ls(),Q),Q={load:bs,startAutoLoad:js,stopAutoLoad:us,isAutoLoading:Bs,save:Ps,startAutoSave:Js,stopAutoSave:Ds,isAutoSaving:zs,getStatus:Qs,addStatusListener:Gs,delListener:Ys,schedule:Cs,getStore:()=>s,destroy:()=>(ru(Rs(ye,L)),us().stopAutoSave()),getStats:()=>({loads:y,saves:$}),...T};return lu(Q)},Mo="storage",Qc=(s,t,e,o)=>gu(s,async()=>Lu(e.getItem(t)),async L=>e.setItem(t,Su(L())),L=>{const S=y=>{if(y.storageArea===e&&y.key===t)try{L(Wc(y.newValue))}catch{L()}};return No.addEventListener(Mo,S),S},L=>No.removeEventListener(Mo,L),o,3,{getStorageName:()=>t}),eC=(s,t,e)=>Qc(s,t,localStorage,e),nC=(s,t,e)=>Qc(s,t,sessionStorage,e),ve="",Ns=s=>s==null,Yt=(s,t,e)=>Ns(s)?e==null?void 0:e():t(s),un=s=>Array.isArray(s),ut=s=>s.length,Au=(s,t)=>s.test(t),Gc=s=>{throw new Error(s)},Cn=(s,t)=>s.forEach(t),bu=(s,t)=>s.splice(0,t),bn=(s,...t)=>s.push(...t),Yc=s=>s.shift(),Je=Object,_o=s=>Je.getPrototypeOf(s),Pu=s=>!Ns(s)&&Yt(_o(s),t=>t==Je.prototype||Ns(_o(t)),()=>!0),Du=Je.keys,Fu=Je.freeze,vu=s=>ut(Du(s)),$e=s=>Pu(s)&&vu(s)==0,ku=s=>(s==null?void 0:s.size)??0,Nu=(s,t)=>(s==null?void 0:s.has(t))??!1,qc=s=>Ns(s)||ku(s)==0,Kc=(s,t)=>s==null?void 0:s.forEach(t),Oc=(s,t)=>s==null?void 0:s.delete(t),Xt=s=>new Map(s),ys=(s,t)=>s==null?void 0:s.get(t),Ct=(s,t,e)=>Ns(e)?(Oc(s,t),s):s==null?void 0:s.set(t,e),Sn=(s,t,e,o)=>(Nu(s,t)?o==null||o(ys(s,t)):Ct(s,t,e()),ys(s,t)),Ln=(s,t,e,o,c=0)=>Yt((e?Sn:ys)(s,t[c],c>ut(t)-2?e:Xt),a=>{if(c>ut(t)-2)return o!=null&&o(a)&&Ct(s,t[c]),a;const u=Ln(a,t,e,o,c+1);return qc(a)&&Ct(s,t[c]),u}),hu=s=>new Set(un(s)||Ns(s)?s:[s]),Mu=(s,t)=>s==null?void 0:s.add(t),_u=/^\d+$/,zu=()=>{const s=[];let t=0;return[e=>(e?Yc(s):null)??ve+t++,e=>{Au(_u,e)&&ut(s)<1e3&&bn(s,e)}]},Hu=(s,t=[ve])=>{const e=[],o=(c,a)=>a==ut(t)?bn(e,c):t[a]===null?Kc(c,u=>o(u,a+1)):Cn([t[a],null],u=>o(ys(c,u),a+1));return o(s,0),e},Uu=s=>{let t;const[e,o]=zu(),c=Xt();return[(S,y,$,d=[],g=()=>[])=>{t??(t=s());const A=e(1);return Ct(c,A,[S,y,$,d,g]),Mu(Ln(y,$??[ve],hu),A),A},(S,y,...$)=>Cn(Hu(S,y),d=>Kc(d,g=>ys(c,g)[0](t,...y??[],...$))),S=>Yt(ys(c,S),([,y,$])=>(Ln(y,$??[ve],void 0,d=>(Oc(d,S),qc(d)?1:0)),Ct(c,S),o(S),$)),S=>Yt(ys(c,S),([y,,$=[],d,g])=>{const A=(...N)=>{var W;const H=ut(N);H==ut($)?y(t,...N,...g(N)):Ns($[H])?Cn(((W=d[H])==null?void 0:W.call(d,...N))??[],j=>A(...N,j)):A(...N,$[H])};A()})]},we=Xt(),de=Xt(),Wu=(s=1,t)=>s!=1&&t.isMergeable()?[1,t.getMergeableContent,t.getTransactionMergeableChanges,([[e],[o]])=>!$e(e)||!$e(o),t.setDefaultContent]:s!=2?[0,t.getContent,t.getTransactionChanges,([e,o])=>!$e(e)||!$e(o),t.setContent]:Gc("Store type not supported by this Persister"),oC=(s,t,e,o,c,a,u,T={},L=[])=>{let S=0,y=0,$=0,d,g,A;Sn(we,L,()=>0),Sn(de,L,()=>[]);const N=Xt(),[H,W,j,fs,gs]=Wu(u,s),[Ts,Z,F]=Uu(()=>Q),v=R=>{R!=S&&(S=R,Z(N,void 0,S))},ls=async()=>{if(!ys(we,L)){for(Ct(we,L,1);!Ns(d=Yc(ys(de,L)));)try{await d()}catch{}Ct(we,L,0)}},As=R=>{(H&&un(R==null?void 0:R[0])?(R==null?void 0:R[2])===1?s.applyMergeableChanges:s.setMergeableContent:(R==null?void 0:R[2])===1?s.applyChanges:s.setContent)(R)},bs=async R=>(S!=2&&(v(1),y++,await Cs(async()=>{try{const J=await t();un(J)?As(J):Gc(`Content is not an array ${J}`)}catch{R&&gs(R)}v(0)})),Q),js=async R=>{await us().load(R);try{g=await o(async(J,Fs)=>{Fs||J?S!=2&&(v(1),y++,As(Fs??J),v(0)):await bs()})}catch{}return Q},us=()=>(g&&(c(g),g=void 0),Q),Bs=()=>!Ns(g),Ps=async R=>(S!=1&&(v(2),$++,await Cs(async()=>{try{await e(W,R)}catch{}v(0)})),Q),Js=async()=>(await Ds().save(),A=s.addDidFinishTransactionListener(()=>{const R=j();fs(R)&&Ps(R)}),Q),Ds=()=>(Yt(A,s.delListener),A=void 0,Q),zs=()=>!Ns(A),Qs=()=>S,Gs=R=>Ts(R,N),Ys=R=>(F(R),s),Cs=async(...R)=>(bn(ys(de,L),...R),await ls(),Q),Q={load:bs,startAutoLoad:js,stopAutoLoad:us,isAutoLoading:Bs,save:Ps,startAutoSave:Js,stopAutoSave:Ds,isAutoSaving:zs,getStatus:Qs,addStatusListener:Gs,delListener:Ys,schedule:Cs,getStore:()=>s,destroy:()=>(bu(ys(de,L)),us().stopAutoSave()),getStats:()=>({loads:y,saves:$}),...T};return Fu(Q)};export{tC as U,eC as a,oC as b,nu as c,nC as d};
